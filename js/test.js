var isValid,dataBlock,presents,crdVal,number=0,maxNumber=$(".test-slider__item").length,$element=$(".test-slider__item").find("input, select, textarea"),btnPrev=$(".prev-test"),btnNext=$(".next-test"),testTextNum=7,testText=$(".test__img-count"),activeSlede=[];$(".test-item__number-furst").text(number+1),$(".test-item__number-all").text("/ "+(maxNumber-1)),testText.text(testTextNum+" питань");for(var i=0;i<maxNumber;i++)activeSlede[i]=!1;function btnActive(e){0===number?(btnPrev.prop("disabled","false"),btnNext.prop("disabled",e)):(btnPrev.prop("disabled",!1),!0===activeSlede[number]||!1===e?btnNext.prop("disabled",!1):btnNext.prop("disabled",!0))}function progress(e){var t=".test-circle-"+(e+1);$(".test-block-"+e).addClass("test-block-active"),$(t).addClass("test-circle-active")}function btnClick(){btnPrev.on("click",(function(e){e.preventDefault(),--number,$(".test-slider__item").hide(),$(".test-slider__item").eq(number).fadeIn(),btnActive(!isValid),$(".test-item__number-furst").text(number+1),1!=testTextNum?(testTextNum+=1)<5&&testTextNum>1?testText.text(testTextNum+" вопросa"):testTextNum<2?testText.text(testTextNum+" вопрос"):testText.text(testTextNum+" вопросов"):($("#present_img").attr({src:"img/q_present.png"}),testText.text("Ваш подарок"),$(".test__img-title").hide(),$(".test__img-price").hide()),progress(number),animateTop(),btnNext.prop("disabled")?$(".text-subbtn").show():$(".text-subbtn").hide()}));var e=$(".ner-block-1");$(".select-ner").click((function(){e.detach()})),$(".return-ner").click((function(){e.insertAfter(".first-test-item")})),btnNext.on("click",(function(e){e.preventDefault(),activeSlede[number]=!0,++number,1!=testTextNum&&((testTextNum-=1)<5&&testTextNum>1?testText.text(testTextNum+" вопросa"):testTextNum<2?testText.text(testTextNum+" вопрос"):testText.text(testTextNum+" вопросов"),$(".test__img-title").show(),$("#present_img").attr({src:"img/present_big.png"})),$(".test-slider__item").hide(),$(".test-slider__item").eq(number).fadeIn(1e3),btnActive(!isValid),!0===activeSlede[number]?btnNext.prop("disabled",!1):btnNext.prop("disabled",!0),number===maxNumber-1&&($(".test__btn-block").hide(),".text-subbtn".hide()),number===maxNumber-2&&($(".test__img-title").hide(),testText.text("Ваш подарок"),$("#present_img").attr({src:"img/q_present.png"})),$(".test-item__number-furst").text(number+1),progress(number),animateTop(),btnNext.prop("disabled")?$(".text-subbtn").show():$(".text-subbtn").hide()}))}function triggerBtn(e){e.preventDefault(),activeSlede[number]=!0,++number,1!=testTextNum&&((testTextNum-=1)<5&&testTextNum>1?testText.text(testTextNum+" вопросa"):testTextNum<2?testText.text(testTextNum+" вопрос"):testText.text(testTextNum+" вопросов"),$(".test__img-title").show(),$("#present_img").attr({src:"img/present_big.png"})),$(".test-slider__item").hide(),$(".test-slider__item").eq(number).fadeIn(1e3),btnActive(!isValid),!0===activeSlede[number]?btnNext.prop("disabled",!1):btnNext.prop("disabled",!0),number===maxNumber-1&&($(".test__btn-block").hide(),".text-subbtn".hide()),number===maxNumber-2&&($(".test__img-title").hide(),testText.text("Ваш подарок"),$("#present_img").attr({src:"img/q_present.png"})),$(".test-item__number-furst").text(number+1),progress(number),animateTop(),btnNext.prop("disabled")?$(".text-subbtn").show():$(".text-subbtn").hide()}function animateTop(){var e=$(".test-item__desc").offset().top-15;$("body,html").animate({scrollTop:e},400)}function simulate(e,t){var n,s=extend(defaultOptions,arguments[2]||{}),i=null;for(var r in eventMatchers)if(eventMatchers[r].test(t)){i=r;break}if(!i)throw new SyntaxError("Only HTMLEvents and MouseEvents interfaces are supported");if(document.createEvent)n=document.createEvent(i),"HTMLEvents"==i?n.initEvent(t,s.bubbles,s.cancelable):n.initMouseEvent(t,s.bubbles,s.cancelable,document.defaultView,s.button,s.pointerX,s.pointerY,s.pointerX,s.pointerY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,e),e.dispatchEvent(n);else{s.clientX=s.pointerX,s.clientY=s.pointerY;var l=document.createEventObject();n=extend(l,s),e.fireEvent("on"+t,n)}return e}function extend(e,t){for(var n in t)e[n]=t[n];return e}$element.on("change input",(function(e){var t=$(this).val().trim();btnActive(!(isValid=""!==t)),$(".text-subbtn").hide()})),progress(0),btnClick(),$(".test-presents-slide").find("input").on("input change",(function(){""!==$(this).val().trim()&&(presents=$(this).parents(".test-slider__elem").index()),$(".test__img-price").show(),0===presents?(testText.text("Клінінг після ремонту"),$("#present_img").attr({src:"img/item7_1.jpg"})):1===presents?(testText.text("Фотозйомка приміщення після ремонту"),$("#present_img").attr({src:"img/item7_2.jpg"})):2===presents&&(testText.text("Консультація керівника"),$("#present_img").attr({src:"img/item7_3.jpg"}))})),$(".skipEl").click((function(){$(this).find(".customRadio_radio").prop("checked","checked"),triggerBtn(event)})),$("#number-slider").slider({animate:"slow",range:"min",value:0,max:300,slide:function(e,t){$("#send-result-polzunok").val(t.value),$(".text-subbtn").hide()}}),$("#send-result-polzunok").val($("#number-slider").slider("value")),$("#send-result-polzunok").on("keyup",(function(e){crdVal=$("#send-result-polzunok").val().trim(),parseInt(crdVal)>300&&$("#send-result-polzunok").val(300),this.value.match(/[^0-9]/g)&&(this.value=this.value.replace(/[^0-9]/g,"")),$("#number-slider").slider("value",$(this).val())})),$("#send-result-polzunok").on("change , input",(function(){""===crdVal&&$("#send-result-polzunok").val()})),$("#no").on("change input",(function(){$(this).prop("checked")?($("#number-slider").slider("value",0),$("#number-slider").slider("disable"),$("#send-result-polzunok").val("0").attr({disabled:"disabled"})):($("#number-slider").slider("enable"),$("#send-result-polzunok").removeAttr("disabled"))})),$("#number-slider").slider({change:function(e,t){btnNext.prop("disabled",!1)}});var eventMatchers={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/},defaultOptions={pointerX:0,pointerY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0};